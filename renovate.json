{
  "extends": [
    "config:recommended"
  ],
  "baseBranches": ["dev"],
  "packageRules": [
    {
      "matchUpdateTypes": ["patch"],
      "baseBranch": "main",
      "automerge": true
    },
    {
      "matchUpdateTypes": ["major", "minor", "pin", "digest"],
      "baseBranch": "dev",
      "automerge": true
    }
  ],
  "argocd": {
    "fileMatch": ["apps/.+/[^/]+-argocd\\.yaml$"]
  },
  "terraform": {
    "fileMatch": ["infra/tofu/.*\\.tf$"]
  },
  "kubernetes": {
    "fileMatch": [
      "apps/.+/.+\\.yaml$",
      "infra/crossplane/.+\\.yaml$",
      "infra/teleport/.+\\.yaml$"
    ]
  },
  "github-actions": {
    "fileMatch": [".gitea/workflows/.*\\.yaml$"]
  },
  "dockerfile": {
    "fileMatch": ["apps/.+/Dockerfile"]
  },
  "platformAutomerge": true
}
