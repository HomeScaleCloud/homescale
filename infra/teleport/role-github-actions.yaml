apiVersion: resources.teleport.dev/v1
kind: TeleportRoleV7
metadata:
  name: github-actions
  namespace: teleport
spec:
  allow:
    logins:
      - github-actions
    node_labels:
      '*': '*'
    app_labels:
      '*': '*'
    db_labels:
      '*': '*'
    db_names:
      - '*'
    db_users:
      - '*'
    kubernetes_groups:
      - system:masters
    kubernetes_labels:
      '*': '*'
    kubernetes_resources:
      - kind: '*'
        name: '*'
        namespace: '*'
        verbs:
          - '*'
    rules:
      - resources:
          - '*'
        verbs:
          - '*'
  options:
    max_session_ttl: 00h5m0s
    record_session:
      default: best_effort
      desktop: true
    ssh_file_copy: true